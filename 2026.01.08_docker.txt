


Docker 패키지 저장소 구성 및 Docker 설치
    $ sudo dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo
    $ sudo dnf install -y docker-ce  
    $ sudo systemctl enable --now docker
    $ sudo systemctl status docker
    $ sudo usermod -aG docker $USER
    $ docker --version



Docker-Compose 설치
1) sudo dnf install -y curl 
2) sudo curl -L "https://github.com/docker/compose/releases/download/v2.40.3/docker-compose-linux-x86_64" -o /usr/local/bin/docker-compose
3) sudo chmod +x /usr/local/bin/docker-compose
4) docker-compose version



[ 학습 목표 ]
• 도커를 중심으로 현대의 소프트웨어 개발과 배포 방식을 설명할 수 있다.
• 도커의 아키텍처에 대해 설명할 수 있다.
• 도커가 널리 사용되는 이유와 활용 방법에 대해 설명할 수 있다.

[학습 내용]
• 컨테이너 기술과 도커
• 도커의 아키텍처
• 도커를 사용하는 이유와 활용 방법

1️⃣ 전통적인 배포 모델과 가상 머신의 문제점
- 하드웨어 기반 배포 방식
  - 단일 서버에서 애플리케이션 실행에 적합하지만 확장성과 관리가 어려움.
- 기존 가상화 기술 (VM)
  - 하이퍼바이저를 사용해 여러 개의 가상 머신(VM) 운영.
  - 각 VM은 운영체제(OS)를 포함한 모든 리소스를 독립적으로 사용.
  - 단점: 크기가 크고, 시작 시간이 오래 걸리며, 리소스 사용이 비효율적.

2️⃣ 컨테이너 기술의 특징과 장점
- 컨테이너란?
  - 애플리케이션과 필요한 모든 종속성을 패키징하여 격리된 환경에서 실행.
  - 실행 속도가 빠르고 가볍게 동작함.
- 컨테이너의 장점
  - ✅ 가벼운 구조: OS를 포함하지 않아 VM보다 작은 크기.
  - ✅ 빠른 실행: 시작 시간이 짧아 빠르게 배포 가능.
  - ✅ 효율적인 자원 사용: 호스트 OS의 리소스를 공유하여 비용 절감.

3️⃣ 컨테이너 vs 가상 머신(VM)

가상 머신(VM) vs 컨테이너(Container)
--------------------------------------------
실행 방식   | 하이퍼바이저를 통해 OS 전체 가상화          | 호스트 OS에서 애플리케이션만 격리 실행
크기          | OS 포함 (무겁고 용량 큼)                          | OS 공유 (가벼움)
실행 속도   | 느림 (OS 부팅 필요)                                 | 빠름 (즉시 실행 가능)
리소스 효율성 | 각 VM이 OS를 포함해 메모리/CPU 차지 | 공유된 OS 자원 활용 (낭비 적음)
--------------------------------------------


✅ 리눅스 컨테이너(Linux Container, LXC) 정의
리눅스 컨테이너는 리눅스 커널에서 제공하는 가벼운 가상화 기술로, 애플리케이션을 격리된 환경에서 실행할 수 있도록 지원한다.
기존의 가상 머신(VM)처럼 별도의 운영체제(OS)를 설치하지 않고, 호스트 OS의 커널을 공유하면서도 독립된 실행 환경을 제공한다.
Docker 컨테이너의 기반 기술 중 하나이다.


✅ 리눅스 컨테이너의 특징
1) 호스트 OS의 커널 공유
VM과 달리 자체 OS를 포함하지 않고, 호스트 OS의 커널을 공유하여 가볍고 빠르게 실행됩니다.

2) 격리된 실행 환경 제공
각 컨테이너는 별도의 파일 시스템, 네트워크, 프로세스 공간, 사용자 ID 등을 가질 수 있어 마치 독립적인 시스템처럼 동작합니다.

3) 빠른 실행 속도
컨테이너는 OS 부팅 없이 바로 실행되므로, 가상 머신보다 훨씬 빠르게 실행됩니다.

4) 가상 머신(VM)보다 경량화
VM은 전체 OS를 포함해야 하지만, 컨테이너는 애플리케이션과 필수 구성 요소만 포함하기 때문에 메모리와 CPU를 효율적으로 사용합니다.


✅ 도커 컨테이너의 특징
1) 가벼움 & 빠른 실행
별도의 운영체제가 없어 가상 머신보다 훨씬 가볍고 빠르게 실행된다.
컨테이너 시작 시간이 수 초 이내로 매우 짧다.

2) 독립적인 실행 환경 제공
애플리케이션과 그 종속성을 포함하여 어디서든 동일한 환경에서 실행할 수 있다.
실행 중인 컨테이너는 서로 격리되어 독립적으로 동작한다.

3) 운영체제(OS) 공유
기존 VM과 달리, 각 컨테이너는 호스트 OS의 커널을 공유한다.
따라서 리소스 사용을 최적화하고, 여러 개의 컨테이너를 실행할 수 있다.

4) 이식성(Portability) 강화
로컬 환경에서 개발한 컨테이너를 그대로 클라우드, 서버, 다른 운영체제에서도 실행할 수 있다.
"한 번 빌드하면 어디서든 실행할 수 있다."

 리눅스 컨테이너(LXC)는 기본적인 컨테이너 기술이며, Docker는 LXC를 기반으로 더 강력한 기능을 추가한 것이다.
 Docker 컨테이너는 이미지 시스템을 활용하고, 더 쉽게 실행 및 관리할 수 있도록 설계되었다.
 리눅스 컨테이너(LXC)는 기본적인 컨테이너 기술이며, Docker는 이를 발전시켜 더욱 강력한 기능과 사용성을 제공하는 도구이다.





📌 도커 아키텍처의 주요 구성 요소 정리

1️⃣ 도커 클라이언트 (Docker Client)
- 역할: 사용자가 도커를 제어하기 위해 사용하는 명령줄 도구 또는 API 인터페이스.
- 주요 기능:
  - 도커 데몬(Docker Daemon)과 통신하여 컨테이너 생성, 실행, 관리.
  - `docker run`, `docker build`, `docker pull` 등의 명령을 실행.

2️⃣ 도커 호스트 (Docker Host)
- 역할: 도커 엔진(Docker Engine)이 실행되는 물리적 또는 가상 서버.
- 주요 구성 요소:
  - 도커 데몬(Docker Daemon): 컨테이너와 이미지의 생성, 실행, 관리 담당.
  - 컨테이너(Container): 도커 이미지로부터 실행되는 독립적인 환경.
  - 컨테이너 런타임(Container Runtime): 컨테이너를 실행하는 프로세스.

3️⃣ 도커 레지스트리 (Docker Registry)
- 역할: 도커 이미지를 저장하고 관리하는 중앙 저장소.
- 주요 기능:
  - `docker pull` 명령을 사용하여 이미지를 다운로드.
  - `docker push` 명령을 사용하여 새 이미지를 업로드.
- 대표적인 공개 레지스트리:
  - Docker Hub: 가장 널리 사용되는 공개 레지스트리.
  - Private Registry: 기업에서 자체적으로 운영하는 내부 저장소.


📌 모놀리스 아키텍처와 마이크로서비스 아키텍처
1️⃣ 모놀리스 아키텍처 (Monolith Architecture)
- 여러 모듈(Module)이 하나의 프로그램에서 실행됨.
- 대규모 서비스에서는 확장성과 유연성이 부족.
- 기능이 복잡하고 변경이 어려움.

2️⃣ 마이크로서비스 아키텍처 (Microservice Architecture)
- 여러 모듈을 독립적으로 구성하여 서로 영향을 최소화.
- 언어와 기술 스택의 종속성이 줄어듦.
- 도커 컨테이너를 활용하여 독립적인 서비스 실행 가능.
- 요구사항 변화에 빠르게 대응할 수 있는 구조.

✅ 도커는 마이크로서비스 아키텍처를 구현하는 데 적합한 기술로, 서비스 간 결합도를 낮추고 확장성을 높이는 데 기여함.




도커 이미지(개요)
필요한 프로그램과 라이브러리, 소스를 설치한 뒤 파일로 만들고 이 이미지를 저장소에 올리고, 받을 수 있다.
운영체제로 보면 실행 파일과 같은 형태( 컨테이너 실행에 필요한 파일과 설정값을 포함한다. )


1. 이미지 처리방식
   레이어 개념, 도커는 베이스 이미지에서 바뀐 부분만 추가하여 이미지로 생성 컨테이너로 실행 할 때는, 
   베이스 이미지와 바뀐 부분을 합쳐서 실행

2.  레이어 (layer) 
  -  Read-Only Layer (Container 제외) 
  -  Read-Write Layer (최상위 레이어에 위치)

3. Copy-on-Write
   - 공유 및 복사의 유사한 전략으로 이미지 디스크 공간 사용 컨테이너 시작 시간 성능 최적

4. 파일시스템
  - 유니온 파일 시스템 형식(aufs, btrfs, devicemapper)
  - 여러 파일 시스템을 통합하여 하나의 파일 시스템으로 처리(수정 레이어만 빌드 변경)


docker login -u thddmstn
docker search bWAPP
# docker image ls  
# docker pull raesene/bwapp:latest  (축약)
# docker rmi raesene/bwapp:latest
# docker image pull raesene/bwapp:latest
# docker ps -a (축약)
# docker container ps -a
root@roror:/etc# docker tag ubuntu thddmstn/ubuntu:latest
docker create -i -t --name ubuntu ubuntu
docker create -i -t --name ubuntu1 ubuntu:22.04
docker images
docker ps -a
docker rm ubuntu 












